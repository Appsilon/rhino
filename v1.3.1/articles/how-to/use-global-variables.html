<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How-to: Use global variables â€¢ rhino</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="How-to: Use global variables">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-NEHZJ9B11D"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NEHZJ9B11D');
</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-FQQZL5V93G"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FQQZL5V93G');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">rhino</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.1</small>

    <div id="version-switcher" class="dropdown">
  <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">1.3</a>
  <ul class="dropdown-menu">
<li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/dev">1.10.1.9000 (dev)</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/">1.10</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.9.0">1.9</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.8.0">1.8</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.7.0">1.7</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.6.0">1.6</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.5.0">1.5</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.4.0">1.4</a>
    </li>
    <li>
      <a class="dropdown-item" href="https://appsilon.github.io/rhino/v1.3.1">1.3</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.2.1">1.2</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.1.1">1.1</a>
    </li>
    <li>
      <a class="external-link dropdown-item" href="https://appsilon.github.io/rhino/v1.0.0">1.0</a>
    </li>
  </ul>
</div>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../../articles/tutorial/create-your-first-rhino-app.html">Create your first Rhino app</a></li>
    <li><a class="dropdown-item" href="../../articles/tutorial/write-end-to-end-tests-with-cypress.html">Write end-to-end tests with Cypress</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-explanation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Explanation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-explanation">
<li><a class="dropdown-item" href="../../articles/explanation/what-is-rhino.html">What is Rhino?</a></li>
    <li><a class="dropdown-item" href="../../articles/explanation/application-structure.html">Application structure</a></li>
    <li><a class="dropdown-item" href="../../articles/explanation/rhino-yml.html">Configuring Rhino - rhino.yml</a></li>
    <li><a class="dropdown-item" href="../../articles/explanation/box-modules.html">Box modules</a></li>
    <li><a class="dropdown-item" href="../../articles/explanation/renv-configuration.html">Renv configuration</a></li>
    <li><a class="dropdown-item" href="../../articles/explanation/node-js-javascript-and-sass-tools.html">Node.js - JavaScript and Sass tools</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-how-to-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">How-to Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-how-to-guides">
<li><a class="dropdown-item" href="../../articles/how-to/migrate-app-to-rhino.html">Migrate app to Rhino</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/write-r-code.html">Write R code</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/write-javascript-code.html">Write JavaScript code</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/use-static-files.html">Use static files</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/manage-r-dependencies.html">Manage R dependencies</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/manage-secrets-and-environments.html">Manage secrets and environments</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/enable-shiny-bookmarking.html">Enable Shiny bookmarking</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/keep-multiple-apps-in-a-single-repository.html">Keep multiple apps in a single repository</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/use-global-variables.html">Use global variables</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/use-shinytest2.html">Use shinytest2</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/add-internationalization.html">Add internationalization</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/add-routing.html">Add routing</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/use-shiny-fluent.html">Use shiny.fluent</a></li>
    <li><a class="dropdown-item" href="../../articles/how-to/use-shinymanager.html">Use shinymanager</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../../articles/faq.html">FAQ</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Appsilon/rhino/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/Appsilon"><span class="fa fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://fosstodon.org/@appsilon"><span class="fa fab fa-mastodon fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How-to: Use global variables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Appsilon/rhino/blob/main/vignettes/how-to/use-global-variables.Rmd" class="external-link"><code>vignettes/how-to/use-global-variables.Rmd</code></a></small>
      <div class="d-none name"><code>use-global-variables.Rmd</code></div>
    </div>

    
    
<p>Rhino uses <a href="https://appsilon.github.io/rhino/articles/explanation/box-modules.html" class="external-link"><code>box</code></a>
to ensure reusable and modular code, both from using packages and using
the scripts within the app itself. Rhino favors the explicit over the
implicit, and a local scope over a global scope.</p>
<p>Sometimes we need global definitions however and storing constants is
the most common reason for that. The suggested way to create global
constants in Rhino is to define and export the constant inside its own
<code>R</code> script in <code>app/logic</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/constant.R</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fl">42</span></span></code></pre></div>
<p>The global constant can be imported and used in other modules.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/another_module.R</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">constant</span><span class="op">[</span><span class="va">answer</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Most of the time, it is sufficient to define a constant and then
export and use it throughout the app.</p>
<p>However, there are instances when an object may need to change its
value as the app runs. In such cases, Rhino suggests the following ways
to handle global variables.</p>
<p>Note: Using global variables can make the app more difficult to
manage and understand. If the variable can change its value at any point
in the app, future changes to the app must consider how this global
variable will be affected. A changing global variable may also make
testing difficult because tests may affect the global variables. The
tests are no longer independent of each other.</p>
<div class="section level2">
<h2 id="global-variables">Global Variables<a class="anchor" aria-label="anchor" href="#global-variables"></a>
</h2>
<div class="section level3">
<h3 id="vanilla-r">Vanilla R<a class="anchor" aria-label="anchor" href="#vanilla-r"></a>
</h3>
<p>In <code>R</code>, <a href="http://adv-r.had.co.nz/Environments.html" class="external-link">global variables live
inside <code>.GlobalEnv</code></a>. Global variables can be updated
within a function using <code>&lt;&lt;-</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># constants.R</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fl">42</span></span>
<span><span class="va">set_answer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">new_answer</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">answer</span> <span class="op">&lt;&lt;-</span> <span class="va">new_answer</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># main.R</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"constants.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 42</span></span>
<span><span class="fu">set_answer</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 0</span></span></code></pre></div>
<p>When code is loaded with <code><a href="http://klmr.me/box/reference/use.html" class="external-link">box::use()</a></code>, global variables
live inside the <a href="https://klmr.me/box/articles/mod-env-hierarchy.html#environments-1" class="external-link">moduleâ€™s
own immutable environment</a>. Updating global variables with
<code>&lt;&lt;-</code> will not work.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/constants.R</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fl">42</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">set_answer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">new_answer</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">answer</span> <span class="op">&lt;&lt;-</span> <span class="va">new_answer</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">constants</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">constants</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 42</span></span>
<span><span class="va">constants</span><span class="op">$</span><span class="fu">set_answer</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span> <span class="co"># Error: cannot change value of locked binding.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="variables-in-a-new-environment">Variables in a new environment<a class="anchor" aria-label="anchor" href="#variables-in-a-new-environment"></a>
</h3>
<p>To overcome <code>box</code>â€™s feature of limiting scope, Rhino
suggests creating a new environment and use that environment to contain
the global variables.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/__init__.R</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">global</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">global</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fl">42</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">set_answer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">new_answer</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">global</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="va">new_answer</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/get_answer.R</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">[</span><span class="va">global</span>, <span class="va">set_answer</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">global</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 42</span></span>
<span><span class="fu">set_answer</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">global</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="variables-in--globalenv">Variables in <code>.GlobalEnv</code><a class="anchor" aria-label="anchor" href="#variables-in--globalenv"></a>
</h3>
<p>Alternatively, variables can still be stored in and imported from
<code>.GlobalEnv</code>. The variable must also be defined and updated
using <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/__init__.R</span></span>
<span><span class="va">.GlobalEnv</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fl">42</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">set_answer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">new_answer</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">.GlobalEnv</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="va">new_answer</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/get_answer.R</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span><span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">[</span><span class="va">set_answer</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">.GlobalEnv</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 42</span></span>
<span><span class="fu">set_answer</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">.GlobalEnv</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span> <span class="co"># 0</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="session-variables">Session Variables<a class="anchor" aria-label="anchor" href="#session-variables"></a>
</h2>
<p>Rhino suggests using arguments in module servers for explicit
handling of session variables or user inputs.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">module_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">NS</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">textOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"answer"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">module_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">answer</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu">renderText</span><span class="op">(</span><span class="fu">answer</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span></span>
<span>  ui <span class="op">=</span> <span class="fu">bootstrapPage</span><span class="op">(</span></span>
<span>    <span class="fu">textInput</span><span class="op">(</span><span class="st">"answer"</span>, <span class="st">"Answer"</span><span class="op">)</span>,</span>
<span>    <span class="fu">module_ui</span><span class="op">(</span><span class="st">"module"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu">reactiveVal</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">answer</span>, <span class="fu">answer</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu">module_server</span><span class="op">(</span><span class="st">"module"</span>, <span class="va">answer</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>However, <code>shiny</code> has support for <a href="https://shiny.rstudio.com/reference/shiny/latest/session.html" class="external-link"><code>session$userData</code></a>,
an environment that can store session-specific data.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">module_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">NS</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">textOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"answer"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">module_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu">renderText</span><span class="op">(</span><span class="va">session</span><span class="op">$</span><span class="va">userData</span><span class="op">$</span><span class="fu">answer</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span></span>
<span>  ui <span class="op">=</span> <span class="fu">bootstrapPage</span><span class="op">(</span></span>
<span>    <span class="fu">textInput</span><span class="op">(</span><span class="st">"answer"</span>, <span class="st">"Answer"</span><span class="op">)</span>,</span>
<span>    <span class="fu">module_ui</span><span class="op">(</span><span class="st">"module"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">session</span><span class="op">$</span><span class="va">userData</span><span class="op">$</span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu">reactiveVal</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">answer</span>, <span class="va">session</span><span class="op">$</span><span class="va">userData</span><span class="op">$</span><span class="fu">answer</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">answer</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu">module_server</span><span class="op">(</span><span class="st">"module"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>All modules have access to the variables inside
<code>session$userData</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kamil Å»yÅ‚a, Jakub Nowicki, Leszek SiemiÅ„ski, Marek Rogala, Recle Vibal, Tymoteusz Makowski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
