<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rhino">
<title>How-to: Communicate between modules â€¢ rhino</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="How-to: Communicate between modules">
<meta property="og:description" content="rhino">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-NEHZJ9B11D"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NEHZJ9B11D');
</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-FQQZL5V93G"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FQQZL5V93G');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-primary" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">rhino</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.0</small>

    <a href="https://rhinoverse.dev" class="external-link home"><i class="fa fa-lg fa-chevron-left"></i></a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../../articles/tutorial/create-your-first-rhino-app.html">Create your first Rhino app</a>
    <a class="dropdown-item" href="../../articles/tutorial/write-end-to-end-tests-with-cypress.html">Write end-to-end tests with Cypress</a>
    <a class="dropdown-item" href="../../articles/tutorial/use-react-in-rhino.html">Use React in Rhino</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-explanation">Explanation</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-explanation">
    <a class="dropdown-item" href="../../articles/explanation/what-is-rhino.html">What is Rhino?</a>
    <a class="dropdown-item" href="../../articles/explanation/application-structure.html">Application structure</a>
    <a class="dropdown-item" href="../../articles/explanation/rhino-yml.html">Configuring Rhino - rhino.yml</a>
    <a class="dropdown-item" href="../../articles/explanation/box-modules.html">Box modules</a>
    <a class="dropdown-item" href="../../articles/explanation/renv-configuration.html">Renv configuration</a>
    <a class="dropdown-item" href="../../articles/explanation/node-js-javascript-and-sass-tools.html">Node.js - JavaScript and Sass tools</a>
    <a class="dropdown-item" href="../../articles/explanation/rhino-style-guide.html">Rhino style guide</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-how-to-guides">How-to Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-how-to-guides">
    <a class="dropdown-item" href="../../articles/how-to/migrate-app-to-rhino.html">Migrate app to Rhino</a>
    <a class="dropdown-item" href="../../articles/how-to/write-r-code.html">Write R code</a>
    <a class="dropdown-item" href="../../articles/how-to/write-javascript-code.html">Write JavaScript code</a>
    <a class="dropdown-item" href="../../articles/how-to/use-static-files.html">Use static files</a>
    <a class="dropdown-item" href="../../articles/how-to/manage-secrets-and-environments.html">Manage secrets and environments</a>
    <a class="dropdown-item" href="../../articles/how-to/enable-shiny-bookmarking.html">Enable Shiny bookmarking</a>
    <a class="dropdown-item" href="../../articles/how-to/keep-multiple-apps-in-a-single-repository.html">Keep multiple apps in a single repository</a>
    <a class="dropdown-item" href="../../articles/how-to/use-global-variables.html">Use global variables</a>
    <a class="dropdown-item" href="../../articles/how-to/use-shinytest2.html">Use shinytest2</a>
    <a class="dropdown-item" href="../../articles/how-to/add-internationalization.html">Add internationalization</a>
    <a class="dropdown-item" href="../../articles/how-to/add-routing.html">Add routing</a>
    <a class="dropdown-item" href="../../articles/how-to/set-application-run-parameters.html">Set application run parameters</a>
    <a class="dropdown-item" href="../../articles/how-to/use-addins.html">Use Rhino Addin(s)</a>
    <a class="dropdown-item" href="../../articles/how-to/communicate-between-modules.html">Communicate between modules</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>UI</h6>
    <a class="dropdown-item" href="../../articles/how-to/use-shiny-fluent.html">Use shiny.fluent</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Authentication</h6>
    <a class="dropdown-item" href="../../articles/how-to/use-shinymanager.html">Use shinymanager</a>
    <a class="dropdown-item" href="../../articles/how-to/use-polished.html">Use polished</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deployment</h6>
    <a class="dropdown-item" href="../../articles/how-to/publish-on-huggingface.html">Publish on Hugging Face</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Migration guides</h6>
    <a class="dropdown-item" href="../../articles/how-to/migrate-1-6.html">Migration to Rhino 1.6</a>
    <a class="dropdown-item" href="../../articles/how-to/migrate-1-7.html">Migration to Rhino 1.7</a>
    <a class="dropdown-item" href="../../articles/how-to/migrate-1-8.html">Migration to Rhino 1.8</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../articles/faq.html">FAQ</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Appsilon/rhino/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/Appsilon">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://fosstodon.org/@appsilon">
    <span class="fab fa fab fa-mastodon fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="communicate-between-modules_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="communicate-between-modules_files/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="communicate-between-modules_files/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>How-to: Communicate between modules</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Appsilon/rhino/blob/HEAD/vignettes/how-to/communicate-between-modules.Rmd" class="external-link"><code>vignettes/how-to/communicate-between-modules.Rmd</code></a></small>
      <div class="d-none name"><code>communicate-between-modules.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>State management is a topic that comes along very often when it comes to reactive programming.</p>
<p>As the application grows in size and becomes more intricate, itâ€™s common to find an increasing number of <a href="https://shiny.posit.co/r/articles/improve/modules/" class="external-link">Shiny modules</a> distributed across various levels of depth. This results in the necessity to share information, particularly the applicationâ€™s state, among these diverse Shiny modules.</p>
<p>While there are many ways to approach this problem here we are going to present two examples. In the first example we are going to pass information (reactive objects) from a parent module to a child module and in the second example we are going to pass information between two sibling modules.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1---communicating-between-a-parent-module-and-its-children-modules">Example 1 - Communicating between a parent module and its children modules<a class="anchor" aria-label="anchor" href="#example-1---communicating-between-a-parent-module-and-its-children-modules"></a>
</h3>
<p>In this example we are going to have two modules. The parent module will load and process data using filters and will pass it down to the child module that will display a table for this processed data.</p>
<p><img src="images/communicate_between_modules_1.png"><font size="2"> <strong>Figure 1. Diagram illustrating how a reactive value is passed between a parent and its child module.</strong> </font></p>
<p>Now, letâ€™s explore how the code will look like:</p>
<p>Letâ€™s start with the table module. Remember from the Figure 1 that this module receives a reactive object with the data to display from its parent module.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">div</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">renderTable</span>, <span class="va">req</span>, <span class="va">tableOutput</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">NS</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">div</span><span class="op">(</span></span>
<span>    <span class="fu">tableOutput</span><span class="op">(</span></span>
<span>      outputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @params id The Id of this shiny module</span></span>
<span><span class="co">#' @params table_data A reactive that contains that the data that will be</span></span>
<span><span class="co">#' displayed in the table.</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">table_data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu">req</span><span class="op">(</span><span class="fu">table_data</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="fu">table_data</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>And continue with the usage of the table module within its parent module.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Parent Module</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span></span>
<span>    <span class="va">div</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">reactive</span>, <span class="va">req</span>, <span class="va">selectInput</span></span>
<span>  <span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span></span>
<span>  table_module <span class="op">=</span> <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table_module.R</span>,</span>
<span>  utils <span class="op">=</span> <span class="va">utils</span><span class="op">/</span><span class="va">utils.R</span> <span class="co"># This module is not defined in this example</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">NS</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">div</span><span class="op">(</span></span>
<span>    <span class="fu">selectInput</span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"filters"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Select filters"</span>,</span>
<span>      choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Parameter A"</span>, <span class="st">"Parameter B"</span>, <span class="st">"Parameter C"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="va">table_module</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table_module"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">input_data</span> <span class="op">&lt;-</span> <span class="va">utils</span><span class="op">$</span><span class="fu">read_data_from_database</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Define a reactive to pass down the table module</span></span>
<span>    <span class="va">processed_data</span> <span class="op">&lt;-</span> <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu">process_data</span><span class="op">(</span><span class="va">input_data</span>, <span class="va">input</span><span class="op">$</span><span class="va">filters</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Initialize the table module server function</span></span>
<span>    <span class="va">table_module</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"table_module"</span>, table_data <span class="op">=</span> <span class="va">processed_data</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><font size="2"> <i class="fas fa-triangle-exclamation text-warning" role="presentation" aria-label="triangle-exclamation icon"></i> Both <code>read_data_from_database</code> and <code>process_data</code> imported from the <code>utils.R</code> module are mocked functions that we are using for the purpose of aiding the example. These functions are not defined in this example code. </font></p>
</div>
<div class="section level3">
<h3 id="example-2---communicating-between-two-sibling-modules">Example 2 - Communicating between two sibling modules<a class="anchor" aria-label="anchor" href="#example-2---communicating-between-two-sibling-modules"></a>
</h3>
<p>Suppose we have a data processing module and a plotting module, both functioning as siblings, with their respective roles being to process and exhibit data in a given plot. These sibling modules are nested within another module, which weâ€™ve denoted as <code>main.R</code> which is our main module within a Rhino app.</p>
<p><img src="images/communicate_between_modules_2.png"><font size="2"> <strong>Figure 2. Diagram illustrating how a reactive value is passed between sibling modules.</strong> </font></p>
<p>Letâ€™s explore how the code of these modules should look like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co"># processing_data_module.R</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>box<span class="op">::</span><span class="kw">use</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>  shiny[</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>    div, moduleServer, NS, reactive, req, selectInput</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>  ],</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>box<span class="op">::</span><span class="kw">use</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>  <span class="dt">utils =</span> utils<span class="op">/</span>utils.R <span class="co"># This module is not defined in this example</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a><span class="co">#' @export</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a>ui &lt;-<span class="st"> </span><span class="cf">function</span>(id) {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a>  ns &lt;-<span class="st"> </span><span class="kw">NS</span>(id)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a>  <span class="kw">div</span>(</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true"></a>    <span class="kw">selectInput</span>(</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true"></a>      <span class="dt">inputId =</span> <span class="kw">ns</span>(<span class="st">"parameter"</span>),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true"></a>      <span class="dt">label =</span> Select a parameter,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true"></a>      <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">"alfa"</span>, <span class="st">"beta"</span>, <span class="st">"gamma"</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true"></a>    )</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true"></a>  )</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true"></a>}</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true"></a><span class="co">#' @export</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(id) {</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true"></a>  <span class="kw">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true"></a>    example_data &lt;-<span class="st"> </span>utils<span class="op">$</span><span class="kw">read_data_from_database</span>()</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true"></a>    <span class="kw">reactive</span>({</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true"></a>      utils<span class="op">$</span><span class="kw">process_data</span>(example_data, input<span class="op">$</span>parameter)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true"></a>    })</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true"></a>  })</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true"></a>}</span></code></pre></div>
<p><font size="2"> <i class="fas fa-triangle-exclamation text-warning" role="presentation" aria-label="triangle-exclamation icon"></i> Both <code>read_data_from_database</code> and <code>process_data</code> imported from the <code>utils.R</code> module are mocked functions that we are using for the purpose of aiding the example. These functions are not defined in this example code. </font></p>
<p>And the plotting module:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co"># plotting_module.R</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>box<span class="op">::</span><span class="kw">use</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>  shiny[div, moduleServer, NS, plotOutput, renderPlot, req],</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>  graphics[plot],</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="co">#' @params id Id of the module</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a><span class="co">#' @export</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>ui &lt;-<span class="st"> </span><span class="cf">function</span>(id) {</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>  ns &lt;-<span class="st"> </span><span class="kw">NS</span>(id)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a>  <span class="kw">div</span>(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>    <span class="kw">plotOutput</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>      <span class="dt">inputId =</span> <span class="kw">ns</span>(<span class="st">"plot"</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>    )</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>  )</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a><span class="er">)</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="co">#' @params id Id of the module</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a><span class="co">#' @params data_to_display A reactive that contains that the data that will be</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a><span class="co">#' plotted</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true"></a><span class="co">#' @export</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(id, data_to_display) {</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true"></a>  <span class="kw">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true"></a>  </span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true"></a>    output<span class="op">$</span>plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true"></a>      <span class="kw">req</span>(data_to_display)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true"></a>      <span class="kw">plot</span>(<span class="kw">data_to_display</span>())</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true"></a>    })</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true"></a>   </span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true"></a>  })</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true"></a>}</span></code></pre></div>
<p>After we have our sibling modules ready we use them in our <code>main.R</code> function.<br>
Pay special attention to the server function in which we save the output of the data processing module in a variable and we pass it down to the plot module.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">bootstrapPage</span>, <span class="va">div</span>, <span class="va">moduleServer</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu"><a href="http://klmr.me/box/reference/use.html" class="external-link">use</a></span><span class="op">(</span></span>
<span>  data_module <span class="op">=</span> <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">processing_data_module</span>,</span>
<span>  plot_module <span class="op">=</span> <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">plotting_module</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu">NS</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu">bootstrapPage</span><span class="op">(</span></span>
<span>    <span class="fu">div</span><span class="op">(</span></span>
<span>      <span class="fu">data_module</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"data_module"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">div</span><span class="op">(</span></span>
<span>      <span class="va">plot_module</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"plot_module"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Saving the output of the data_module</span></span>
<span>    <span class="va">data_to_display</span> <span class="op">&lt;-</span> <span class="va">data_module</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"data_module"</span><span class="op">)</span></span>
<span>    <span class="co"># Passing `data_to_display` to the sibling module</span></span>
<span>    <span class="va">plot_module</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"plot_module"</span>, <span class="va">data_to_display</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>To sum up, in the aforementioned example, the data processing module returns a reactive that holds the processed data. Subsequently, this reactive is passed down to the server function of the plotting module. The plotting module utilizes this specific reactive, containing the processed data, to create visualizations.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kamil Å»yÅ‚a, Jakub Nowicki, Leszek SiemiÅ„ski, Marek Rogala, Recle Vibal, Tymoteusz Makowski, Rodrigo Basa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
